<div class="warehouse-bg">
  <div class="warehouse-content">

    <div class="warehouse-card shadow">

      <!-- HEADER -->
      <h4 class="mb-4 text-center">
        {{ isEdit ? 'Edit Product' : isViewMode ? 'View Product' : 'Create Product' }}
      </h4>

      <!-- FORM -->
      <form (ngSubmit)="submit()" #productForm="ngForm">

        <!-- Warehouse -->
        <div class="mb-3">
          <label class="form-label">Warehouse</label>
          <select class="form-select"
                  [(ngModel)]="product.warehouse_id"
                  name="warehouse_id"
                  (change)="onWarehouseChange()"
                  [disabled]="isViewMode"
                  required>
            <option value="">Select Warehouse</option>
            <option *ngFor="let w of warehouses" [value]="w.id">
              {{ w.name }}
            </option>
          </select>
        </div>

        <!-- Zone -->
        <div class="mb-3">
          <label class="form-label">Zone</label>
          <select class="form-select"
                  [(ngModel)]="product.zone_id"
                  name="zone_id"
                  [disabled]="isViewMode"
                  required>
            <option value="">Select Zone</option>
            <option *ngFor="let z of zones" [value]="z.id">
              {{ z.zone_name }} ({{ z.zone_type }})
            </option>
          </select>
        </div>

        <!-- Product Name -->
        <div class="mb-3">
          <label class="form-label">Product Name</label>
          <input class="form-control"
                 [(ngModel)]="product.product_name"
                 name="product_name"
                 [disabled]="isViewMode"
                 required>
        </div>

        <!-- Product Type -->
        <div class="mb-3">
          <label class="form-label">Product Type</label>
          <select class="form-select"
                  [(ngModel)]="product.product_type"
                  name="product_type"
                  [disabled]="isViewMode"
                  required>
            <option value="">Select Type</option>
            <option *ngFor="let t of productTypes" [value]="t">
              {{ t }}
            </option>
          </select>
        </div>

        <!-- Product Category -->
        <div class="mb-3">
          <label class="form-label">Product Category</label>
          <select class="form-select"
                  [(ngModel)]="product.product_category"
                  name="product_category"
                  [disabled]="isViewMode"
                  required>
            <option value="">Select Category</option>
            <option *ngFor="let c of productCategories" [value]="c">
              {{ c }}
            </option>
          </select>
        </div>

        <!-- Quantity -->
        <div class="mb-3">
          <label class="form-label">Quantity</label>
          <input type="number"
                 class="form-control"
                 [(ngModel)]="product.quantity"
                 name="quantity"
                 [disabled]="isViewMode"
                 required>
        </div>

        <!-- Order Date & Time -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Order Date</label>
            <input type="date"
                   class="form-control"
                   [(ngModel)]="product.order_date"
                   name="order_date"
                   [disabled]="isViewMode"
                   required>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Order Time</label>
            <input type="time"
                   class="form-control"
                   [(ngModel)]="product.order_time"
                   name="order_time"
                   [disabled]="isViewMode"
                   required>
          </div>
        </div>

        <!-- Delivery Date & Time -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Delivery Date</label>
            <input type="date"
                   class="form-control"
                   [(ngModel)]="product.delivery_date"
                   name="delivery_date"
                   [disabled]="isViewMode"
                   required>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Delivery Time</label>
            <input type="time"
                   class="form-control"
                   [(ngModel)]="product.delivery_time"
                   name="delivery_time"
                   [disabled]="isViewMode"
                   required>
          </div>
        </div>

        <!-- Status -->
        <div class="mb-4">
          <label class="form-label">Status</label>
          <select class="form-select"
                  [(ngModel)]="product.status"
                  name="status"
                  [disabled]="isViewMode"
                  required>
            <option value="">Select Status</option>
            <option *ngFor="let s of statuses" [value]="s">
              {{ s }}
            </option>
          </select>
        </div>

        <!-- ACTION BUTTONS -->
        <div class="d-flex gap-2 justify-content-center">
          <button type="submit"
                  class="btn btn-primary px-4"
                  *ngIf="!isViewMode">
            {{ isEdit ? 'Update Product' : 'Save Product Entry' }}
          </button>

          <button type="button"
                  class="btn btn-secondary px-4"
                  (click)="cancel()">
            Back
          </button>
        </div>

      </form>

    </div>

  </div>
</div>
