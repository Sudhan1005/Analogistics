<div class="warehouse-bg">
  <div class="warehouse-content">

    <div class="container d-flex justify-content-center">

      <div class="warehouse-card shadow w-100" style="max-width: 900px;">

        <h4 class="text-center mb-4">
          {{ mode === 'view' ? 'View Product' :
             mode === 'edit' ? 'Edit Product' :
             'Product Entry' }}
        </h4>

        <!-- Warehouse -->
        <div class="mb-3">
          <label class="form-label">Warehouse</label>
          <select class="form-select"
                  [(ngModel)]="product.warehouse_id"
                  (change)="onWarehouseChange()"
                  [disabled]="isViewMode">
            <option value="">Select Warehouse</option>
            <option *ngFor="let w of warehouses" [value]="w.id">
              {{ w.name }}
            </option>
          </select>
        </div>

        <!-- Zone -->
        <div class="mb-3">
          <label class="form-label">Zone</label>
          <select class="form-select"
                  [(ngModel)]="product.zone_id"
                  [disabled]="isViewMode">
            <option value="">Select Zone</option>
            <option *ngFor="let z of zones" [value]="z.id">
              {{ z.zone_name }} ({{ z.zone_type }})
            </option>
          </select>
        </div>

        <!-- Product Name -->
        <div class="mb-3">
          <label class="form-label">Product Name</label>
          <input class="form-control"
                 [(ngModel)]="product.product_name"
                 [readonly]="isViewMode">
        </div>

        <!-- Product Type -->
        <div class="mb-3">
          <label class="form-label">Product Type</label>
          <select class="form-select"
                  [(ngModel)]="product.product_type"
                  [disabled]="isViewMode">
            <option value="">Select Type</option>
            <option *ngFor="let t of productTypes" [value]="t">
              {{ t }}
            </option>
          </select>
        </div>

        <!-- Product Category -->
        <div class="mb-3">
          <label class="form-label">Product Category</label>
          <select class="form-select"
                  [(ngModel)]="product.product_category"
                  [disabled]="isViewMode">
            <option value="">Select Category</option>
            <option *ngFor="let c of productCategories" [value]="c">
              {{ c }}
            </option>
          </select>
        </div>

        <!-- Quantity -->
        <div class="mb-3">
          <label class="form-label">Quantity</label>
          <input type="number"
                 class="form-control"
                 [(ngModel)]="product.quantity"
                 [readonly]="isViewMode">
        </div>

        <!-- Order Date & Time -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Order Date</label>
            <input type="date"
                   class="form-control"
                   [(ngModel)]="product.order_date"
                   [disabled]="isViewMode">
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Order Time</label>
            <input type="time"
                   class="form-control"
                   [(ngModel)]="product.order_time"
                   [disabled]="isViewMode">
          </div>
        </div>

        <!-- Delivery Date & Time -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Delivery Date</label>
            <input type="date"
                   class="form-control"
                   [(ngModel)]="product.delivery_date"
                   [disabled]="isViewMode">
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Delivery Time</label>
            <input type="time"
                   class="form-control"
                   [(ngModel)]="product.delivery_time"
                   [disabled]="isViewMode">
          </div>
        </div>

        <!-- Status -->
        <div class="mb-4">
          <label class="form-label">Status</label>
          <select class="form-select"
                  [(ngModel)]="product.status"
                  [disabled]="isViewMode">
            <option value="">Select Status</option>
            <option *ngFor="let s of statuses" [value]="s">
              {{ s }}
            </option>
          </select>
        </div>

        <!-- SAVE / UPDATE BUTTON -->
        <button
          *ngIf="!isViewMode"
          class="btn btn-primary w-100"
          (click)="saveProduct()">

          {{ mode === 'edit' ? 'Update Product' : 'Save Product Entry' }}

        </button>

      </div>

    </div>

  </div>
</div>
