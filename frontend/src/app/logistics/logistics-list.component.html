<div class="warehouse-bg">
  <div class="warehouse-content">

    <div class="container-fluid">
      <div class="warehouse-card shadow">

        <!-- HEADER -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="mb-0">Logistics List</h4>
        </div>

        <div class="card-body table-responsive p-0">
          <table class="table table-bordered table-striped align-middle mb-0">

            <thead class="table-dark">
              <tr>
                <th>#</th>
                <th>Warehouse</th>
                <th>Zone</th>
                <th>Product</th>
                <th>Type</th>
                <th>Category</th>
                <th>Qty</th>
                <th>Delivery Date</th>
                <th>Transport</th>
                <th>Vehicle Type</th>
                <th>Vehicle No</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>

            <tbody *ngIf="list.length; else empty">
              <tr *ngFor="let l of list; let i = index">

                <td>{{ i + 1 }}</td>
                <td>{{ l.warehouse_name }}</td>
                <td>{{ l.zone_name }}</td>
                <td>{{ l.product_name }}</td>
                <td>{{ l.product_type }}</td>
                <td>{{ l.product_category }}</td>
                <td>{{ l.quantity }}</td>
                <td>{{ l.delivery_date }}</td>

                <!-- Transport -->
                <td>
                  <select
                    class="form-select"
                    [(ngModel)]="l.transport_type"
                    name="transport_{{i}}"
                    [disabled]="l.logistics_id">
                    <option value="">Select</option>
                    <option *ngFor="let t of transportTypes" [value]="t">
                      {{ t }}
                    </option>
                  </select>
                </td>

                <!-- Vehicle Type -->
                <td>
                  <select
                    class="form-select"
                    [(ngModel)]="l.vehicle_type"
                    name="vehicle_type_{{i}}"
                    [disabled]="l.logistics_id">
                    <option value="">Select</option>
                    <option *ngFor="let v of vehicleTypes" [value]="v">
                      {{ v }}
                    </option>
                  </select>
                </td>

                <!-- Vehicle No -->
                <td>
                  <input
                    class="form-control"
                    [(ngModel)]="l.vehicle_number"
                    name="vehicle_no_{{i}}"
                    [disabled]="l.logistics_id">
                </td>

                <!-- Status -->
                <td>
                  <span class="badge bg-dark">
                    Out for Delivery
                  </span>
                </td>

                <!-- Actions -->
                <td>
                  <!-- SAVE -->
                 <button
  *ngIf="!l.is_logistics_assigned"
  class="btn btn-success btn-sm"
  (click)="save(l)">
  Save
</button>

<ng-container *ngIf="l.is_logistics_assigned">
  <button class="btn btn-warning btn-sm me-1" (click)="edit(l.id)">Edit</button>
  <button class="btn btn-info btn-sm me-1" (click)="view(l.id)">View</button>
  <button class="btn btn-danger btn-sm" (click)="remove(l.id)">Delete</button>
</ng-container>
                </td>

              </tr>
            </tbody>
          </table>

          <ng-template #empty>
            <div class="text-center text-danger py-4">
              No logistics found
            </div>
          </ng-template>

        </div>
      </div>
    </div>

  </div>
</div>
